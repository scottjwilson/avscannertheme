(function(){const i=document.querySelector(".site-header"),d=document.querySelector(".category-nav");function g(){window.scrollY>50?(i==null||i.classList.add("is-scrolled"),d==null||d.classList.add("is-scrolled")):(i==null||i.classList.remove("is-scrolled"),d==null||d.classList.remove("is-scrolled"))}const r=document.querySelector(".menu-toggle"),s=document.querySelector(".nav-mobile");function p(){const e=(r==null?void 0:r.getAttribute("aria-expanded"))==="true";r==null||r.setAttribute("aria-expanded",!e),s==null||s.classList.toggle("is-open"),s==null||s.setAttribute("aria-hidden",e),document.body.classList.toggle("menu-open")}function u(){r==null||r.setAttribute("aria-expanded","false"),s==null||s.classList.remove("is-open"),s==null||s.setAttribute("aria-hidden","true"),document.body.classList.remove("menu-open")}function E(){const e=document.querySelectorAll(".reveal");if(!e.length)return;const t={root:null,rootMargin:"0px 0px -10% 0px",threshold:.1},n=new IntersectionObserver(o=>{o.forEach(c=>{c.isIntersecting&&c.target.classList.add("is-visible")})},t);e.forEach(o=>{n.observe(o)})}function y(){const e=document.querySelectorAll(".stagger-children");if(!e.length)return;const t={root:null,rootMargin:"0px 0px -10% 0px",threshold:.1},n=new IntersectionObserver(o=>{o.forEach(c=>{c.isIntersecting&&c.target.classList.add("is-visible")})},t);e.forEach(o=>{n.observe(o)})}function S(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){const n=this.getAttribute("href");if(n==="#")return;const o=document.querySelector(n);if(o){t.preventDefault();const c=(i==null?void 0:i.offsetHeight)||0,l=o.getBoundingClientRect().top+window.pageYOffset-c-20;window.scrollTo({top:l,behavior:"smooth"}),u()}})})}function w(){document.querySelectorAll(".card-image img, .single-image img").forEach(t=>{t.complete&&t.naturalHeight>0?t.classList.add("is-loaded"):(t.addEventListener("load",()=>t.classList.add("is-loaded"),{once:!0}),t.addEventListener("error",()=>t.classList.add("is-loaded"),{once:!0}))})}function b(){const e=document.querySelectorAll("[data-year]"),t=new Date().getFullYear();e.forEach(n=>{n.textContent=t})}function A(){const e=document.querySelector(".theme-toggle");if(!e)return;const t=localStorage.getItem("cvw-theme");(t==="light"||t==="dark")&&(document.documentElement.dataset.theme=t),e.addEventListener("click",()=>{const o=document.documentElement.dataset.theme==="light"?"dark":"light";document.documentElement.dataset.theme=o,localStorage.setItem("cvw-theme",o)})}function q(){const e=document.querySelector(".back-to-top");e&&(window.addEventListener("scroll",()=>{window.scrollY>400?(e.hidden=!1,requestAnimationFrame(()=>e.classList.add("is-visible"))):(e.classList.remove("is-visible"),e.addEventListener("transitionend",()=>{e.classList.contains("is-visible")||(e.hidden=!0)},{once:!0}))},{passive:!0}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}function k(){const e=document.querySelectorAll(".grid.stagger-children"),t=document.getElementById("card-skeleton");!e.length||!t||e.forEach(n=>{const o=n.querySelectorAll(".card");if(!o.length)return;const c=Math.min(o.length,6),l=document.createElement("div");l.className="skeleton-grid",l.classList.add("grid","grid-3");for(let a=0;a<c;a++)l.appendChild(t.content.cloneNode(!0));n.parentNode.insertBefore(l,n),n.style.display="none";const m=n.querySelectorAll(".card-image img");if(!m.length){f(l,n);return}let L=0;const x=m.length;function h(){L++,L>=x&&f(l,n)}m.forEach(a=>{a.complete&&a.naturalHeight>0?h():(a.addEventListener("load",h,{once:!0}),a.addEventListener("error",h,{once:!0}))}),setTimeout(()=>f(l,n),5e3)})}function f(e,t){e.parentNode&&(e.classList.add("skeleton-fade-out"),t.style.display="",e.addEventListener("transitionend",()=>{e.remove()},{once:!0}),setTimeout(()=>e.remove(),400))}function v(){window.addEventListener("scroll",g,{passive:!0}),r==null||r.addEventListener("click",p),s==null||s.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",u)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&u()}),g(),A(),k(),E(),y(),S(),w(),b(),q()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v()})();
